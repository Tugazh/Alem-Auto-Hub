# План разработки мобильного приложения ALEM AUTO (MVP)

**Стек:** Go (Backend), Flutter (Frontend), Figma (Design).

**Визуал:** Темная тема (#18181C), акцентный оранжевый градиент (#DC2713 -> #F26010), шрифт Inter.

---

## Текущее состояние реализации

- **Flutter:** реализованы тема/навигация, «Главная», «Деталка авто», «Маркет» (каталог), «Финансы» (статические данные), «Соцсеть» (UI), «ИИ-агент» (чат), «Запись» (лист/деталь). Интеграции — в основном mock/fallback.
- **Go (Backend):** реализован модульный бэкенд «Цифровой паспорт авто» (catalog/vehicle/inspection/media/agent). Auth/SMS/eGov и сервисы market/finance/order/fines/booking/maps отсутствуют.

---

### Спринт 1: Фундамент и Системная логика (Неделя 1)
**Цель:** Привести готовые наработки в систему и запустить архитектуру проекта.

| Роль | Задачи |
| :--- | :--- |
| **Дизайнер** |  **User Flow диаграмма:** Полная карта навигации (Onboarding, Главная, Запись, Маркет, Штрафы, Соцсеть, ИИ, Кошелек).<br> **Information Architecture:** Текстовая структура + визуальная схема в Figma.<br> **UI Kit с состояниями:** Отдельная страница в Figma со всеми компонентами:<br>&nbsp;&nbsp;◦ Кнопки (Primary/Secondary/Text/Icon) — 5 состояний<br>&nbsp;&nbsp;◦ Input поля — 6 состояний (Default/Focused/Filled/Error/Success/Disabled)<br>&nbsp;&nbsp;◦ Карточки — 4 состояния<br>&nbsp;&nbsp;◦ Чекбоксы, радио, Switch<br>&nbsp;&nbsp;◦ Навигация, списки, модалки<br>&nbsp;&nbsp;◦ Индикаторы (Loading/Progress/Pull-to-Refresh)<br>&nbsp;&nbsp;◦ Уведомления (Toast/Inline/Full-screen)<br> **Empty/Loading/Error States:** Для всех списков (иконка 64x64, заголовок, описание, кнопка).<br> **Системные шаблоны:** Skeleton для списков, Error (нет сети/сервер/404/оплата). |
| **Go (Backend)** |  **CI/CD:** Настройка автоматической сборки/развертывания (структура БД готова).<br> **Swagger:** Добавить OpenAPI документацию для Vehicle/Catalog/Inspection/Media API.<br> **Maintenance API:** Создать CRUD для записей обслуживания (ТО, замены). |
| **Flutter** |  **Empty/Loading/Error компоненты:** Реализовать универсальные виджеты состояний.<br> **Интеграция с реальным API:** Заменить mock/fallback на полноценные сервисы для Garage/Maintenance.<br> **Offline Mode:** Добавить кеширование данных гаража и ТО. |

---

### Спринт 2: Вход и Персональные данные (Неделя 2)
**Цель:** Реализация системы удержания пользователя и безопасности.

| Роль | Задачи |
| :--- | :--- |
| **Дизайнер** |  **Онбординг (4 экрана):**<br>&nbsp;&nbsp;◦ Цифровая сервисная книжка<br>&nbsp;&nbsp;◦ Контролируйте расходы<br>&nbsp;&nbsp;◦ Записывайтесь онлайн<br>&nbsp;&nbsp;◦ Общайтесь с автолюбителями<br> **Авторизация (5 экранов):**<br>&nbsp;&nbsp;◦ Экран входа (Телефон, Google, Apple ID, eGov)<br>&nbsp;&nbsp;◦ Экран ввода OTP-кода (4-6 квадратов, таймер)<br>&nbsp;&nbsp;◦ Регистрация — Шаг 1: Телефон<br>&nbsp;&nbsp;◦ Регистрация — Шаг 2: Личные данные<br>&nbsp;&nbsp;◦ Регистрация — Шаг 3: Автомобиль (опционально)<br> **Уведомления (2 экрана):**<br>&nbsp;&nbsp;◦ Список уведомлений<br>&nbsp;&nbsp;◦ Настройки пушей |
| **Go (Backend)** |  **Auth Service:** Реализовать полноценные endpoints (register/login/refresh/logout).<br> **SMS Gateway:** Интеграция с РК SMS-провайдером для OTP.<br> **JWT Tokens:** Генерация/валидация токенов (базовая структура есть).<br> **Profile API:** CRUD для управления профилем пользователя.<br> **eGov Integration:** Проверка личности через API eGov KZ. |
| **Flutter** |  **Auth UI:** Верстка входа, ввода кода и первичной регистрации.<br> **Профиль:** Верстка настроек и интеграция уведомлений (Firebase).<br> **Логика сессий:** Хранение токенов в SecureStorage и обработка состояний входа.<br> **Auto-refresh токенов:** Перехватчик для обновления истекших токенов. |

---

### Спринт 3: Автомобильные сервисы (Неделя 3)
**Цель:** Запуск функционала Штрафов и Записи (критично для рынка РК).

| Роль | Задачи |
| :--- | :--- |
| **Дизайнер** |  **Штрафы (4 экрана):**<br>&nbsp;&nbsp;◦ Список штрафов (фильтры: Все/Неоплаченные/Оплаченные + Empty State)<br>&nbsp;&nbsp;◦ Детальный экран штрафа (фото нарушения, карта места, детали)<br>&nbsp;&nbsp;◦ Экран оплаты штрафа (способы оплаты, форма)<br>&nbsp;&nbsp;◦ Success экран оплаты<br> **Запись на сервис (7 экранов):**<br>&nbsp;&nbsp;◦ Выбор даты и времени (календарь + временные слоты)<br>&nbsp;&nbsp;◦ Выбор СТО (список + карта)<br>&nbsp;&nbsp;◦ Подтверждение записи<br>&nbsp;&nbsp;◦ Success экран записи<br>&nbsp;&nbsp;◦ Мои записи (список)<br>&nbsp;&nbsp;◦ Перенос записи<br>&nbsp;&nbsp;◦ Отмена записи |
| **Go (Backend)** |  **Fines Integration:** Интеграция с API реестров штрафов РК (по ИИН/ГРНЗ).<br> **Payment Gateway:** Интеграция Kaspi/Halyk/CloudPayments для оплаты штрафов.<br> **Booking Service:** CRUD для записей на СТО + управление слотами времени.<br> **Payment для букинга:** Предоплата/полная оплата услуг СТО.<br> **Maps Integration:** API для получения списка СТО с координатами и рейтингами. |
| **Flutter** |  **Штрафы:** Верстка списка (с фильтрами), деталей, формы оплаты и Success экрана.<br> **Запись:** Доработать календарь, выбор временных слотов, подтверждение.<br> **Мои записи:** Список записей с функциями переноса/отмены.<br> **Карты:** Интеграция Google Maps/Yandex Maps для отображения СТО и построения маршрутов.<br> **Payment UI:** Универсальный виджет оплаты для штрафов/бронирований. |

---

### Спринт 4: Торговля и Финансы (Неделя 4)
**Цель:** Коммерческий блок и модуль учета расходов (Кошелек).

| Роль | Задачи |
| :--- | :--- |
| **Дизайнер** |  **Маркетплейс (11 экранов):**<br>&nbsp;&nbsp;◦ Детальная карточка товара (галерея, описание, характеристики, отзывы, рекомендации)<br>&nbsp;&nbsp;◦ Экран всех отзывов<br>&nbsp;&nbsp;◦ Форма написания отзыва<br>&nbsp;&nbsp;◦ Оформление заказа — Шаг 1: Корзина<br>&nbsp;&nbsp;◦ Оформление заказа — Шаг 2: Адрес доставки<br>&nbsp;&nbsp;◦ Оформление заказа — Шаг 3: Способ доставки<br>&nbsp;&nbsp;◦ Оформление заказа — Шаг 4: Оплата<br>&nbsp;&nbsp;◦ Success экран заказа<br>&nbsp;&nbsp;◦ Мои заказы (список)<br>&nbsp;&nbsp;◦ Детальный экран заказа<br>&nbsp;&nbsp;◦ Избранное (Wishlist)<br> **Кошелек (4 экрана):**<br>&nbsp;&nbsp;◦ Добавление расхода (форма)<br>&nbsp;&nbsp;◦ Детальный экран расхода<br>&nbsp;&nbsp;◦ Категории расходов (настройка)<br>&nbsp;&nbsp;◦ Экспорт данных |
| **Go (Backend)** |  **Market Service:** CRUD для товаров, поиск, фильтрация, пагинация.<br> **Cart API:** Управление корзиной (добавить/удалить/обновить количество).<br> **Order Service:** Создание заказов, управление статусами (новый/оплачен/доставляется/завершен).<br> **Review System:** CRUD для отзывов на товары.<br> **Finance Service:** CRUD для расходов, категории, генерация отчетов по авто.<br> **Export API:** Экспорт финансовых данных в CSV/Excel. |
| **Flutter** |  **Магазин:** Детальная карточка товара, отзывы, процесс чекаута (4 шага).<br> **Корзина:** Управление товарами, расчет суммы, промокоды.<br> **Мои заказы:** Список заказов, детальный экран, отслеживание доставки.<br> **Wishlist:** Избранные товары с возможностью добавления в корзину.<br> **Кошелек:** Форма добавления расхода, детальный экран, настройка категорий.<br> **Графики расходов:** Интерактивные графики с фильтрами по периодам.<br> **Offline Mode:** Кеширование финансовых данных для работы без интернета. |

---

### Спринт 5: Сообщество и Интеллект (Неделя 5)
**Цель:** Внедрение инструментов взаимодействия и ИИ-помощника.

| Роль | Задачи |
| :--- | :--- |
| **Дизайнер** |  **Alem Social (7 экранов):**<br>&nbsp;&nbsp;◦ Создание поста<br>&nbsp;&nbsp;◦ Комментарии под постом<br>&nbsp;&nbsp;◦ Редактирование профиля<br>&nbsp;&nbsp;◦ Личные сообщения — Список чатов<br>&nbsp;&nbsp;◦ Личные сообщения — Чат<br>&nbsp;&nbsp;◦ Поиск (люди, сообщества, посты)<br>&nbsp;&nbsp;◦ Детальная страница сообщества<br> **ИИ-Ассистент (3 экрана):**<br>&nbsp;&nbsp;◦ Onboarding ИИ Агента<br>&nbsp;&nbsp;◦ Чат с ИИ (доработка: быстрые кнопки, интеграция с разделами, голосовой ввод)<br>&nbsp;&nbsp;◦ История диалогов<br> **Настройки (5 экранов):**<br>&nbsp;&nbsp;◦ Главный экран настроек<br>&nbsp;&nbsp;◦ Настройки уведомлений<br>&nbsp;&nbsp;◦ Безопасность — Изменение пароля<br>&nbsp;&nbsp;◦ Двухфакторная аутентификация<br>&nbsp;&nbsp;◦ Помощь / FAQ<br> **Модальные окна (3 типа):**<br>&nbsp;&nbsp;◦ Выбор города<br>&nbsp;&nbsp;◦ QR-код<br>&nbsp;&nbsp;◦ Подтверждение действий (Generic) |
| **Go (Backend)** |  **Social Service:** CRUD для постов, лайки, комментарии.<br> **WebSocket Chat:** Реализация real-time чата для личных сообщений.<br> **Communities API:** CRUD для сообществ, вступление/выход.<br> **Search Service:** Поиск по людям, постам, сообществам.<br> **AI Agent:** Доработать интеграцию с Google Gemini (контекст диалога, streaming).<br> **FAQ System:** API для базы знаний и быстрых ответов бота.<br> **Settings API:** Управление настройками пользователя (уведомления, безопасность, 2FA). |
| **Flutter** |  **Social UI:** Создание поста, комментарии, редактирование профиля.<br> **Чаты:** WebSocket/gRPC интеграция для real-time сообщений.<br> **Поиск:** Универсальный поиск с фильтрами по типам результатов.<br> **Сообщества:** Детальная страница, список участников, вступление.<br> **ИИ Агент:** Onboarding агента, история диалогов, голосовой ввод, streaming ответов.<br> **Настройки:** Все экраны настроек (главная/уведомления/безопасность/2FA/FAQ).<br> **Модальные окна:** Выбор города, QR-код, подтверждение действий.<br> **Final QA:** Замена всех моков на реальные API, нагрузочное тестирование, багфиксы. |

---

### Правила параллельной работы:
1. **API First:** Go-разработчик отдает Swagger-контракт до написания кода.
2. **Design Freeze:** Дизайнер фиксирует макеты спринта за 3 дня до начала разработки этого спринта.
3. **Flutter Mocks:** Фронтенд использует `mock_data` в репозиториях, пока бэкенд не закончит логику.